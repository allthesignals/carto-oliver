<!DOCTYPE html>
<!-- saved from url=(0093)http://bl.ocks.org/oriolbx/raw/688c63b865e7045e9f90/174c82b7833945022cf6c0ba16dbf96d6c409bf3/ -->
<html data-ember-extension="1"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    
    <link rel="shortcut icon" href="http://carto.com/assets/favicon.ico">
    <style>
      html, body, #map {
        height: 100%;
        padding: 0;
        margin: 0;
      }
      .buttons {
          height: 50px;
          width: 100px;
          background: rgba(0,255,255,0.8);
          position: absolute;
          top: 20px;
          right: 20px;
          padding: 5px;
          border: 1px solid #FFF;
          border-radius: 5px;
          cursor: pointer;
      }
    </style>

    <link rel="stylesheet" href="./cartodb.css">
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.ie.css" />
    <![endif]-->

  <style></style></head>
  <body marginwidth="0" marginheight="0" class="">
    <div id="map" class="leaflet-container leaflet-fade-anim" style="position: relative; cursor: auto;" tabindex="0"><div class="leaflet-map-pane" style="transform: translate3d(-189px, -15px, 0px);"><div class="leaflet-tile-pane"><div class="leaflet-layer"><div class="leaflet-tile-container leaflet-zoom-animated"></div><div class="leaflet-tile-container leaflet-zoom-animated"><img class="leaflet-tile leaflet-tile-loaded" src="./2.png" style="height: 256px; width: 256px; left: 481px; top: 24px;"><img class="leaflet-tile leaflet-tile-loaded" src="./2(1).png" style="height: 256px; width: 256px; left: 225px; top: 24px;"><img class="leaflet-tile leaflet-tile-loaded" src="./1.png" style="height: 256px; width: 256px; left: 481px; top: -232px;"><img class="leaflet-tile leaflet-tile-loaded" src="./1(1).png" style="height: 256px; width: 256px; left: 225px; top: -232px;"><img class="leaflet-tile leaflet-tile-loaded" src="./3.png" style="height: 256px; width: 256px; left: 225px; top: 280px;"><img class="leaflet-tile leaflet-tile-loaded" src="./3(1).png" style="height: 256px; width: 256px; left: 481px; top: 280px;"><img class="leaflet-tile leaflet-tile-loaded" src="./2(2).png" style="height: 256px; width: 256px; left: -31px; top: 24px;"><img class="leaflet-tile leaflet-tile-loaded" src="./2(3).png" style="height: 256px; width: 256px; left: 737px; top: 24px;"><img class="leaflet-tile leaflet-tile-loaded" src="./3(2).png" style="height: 256px; width: 256px; left: -31px; top: 280px;"><img class="leaflet-tile leaflet-tile-loaded" src="./1(2).png" style="height: 256px; width: 256px; left: -31px; top: -232px;"><img class="leaflet-tile leaflet-tile-loaded" src="./1(3).png" style="height: 256px; width: 256px; left: 737px; top: -232px;"><img class="leaflet-tile leaflet-tile-loaded" src="./3(3).png" style="height: 256px; width: 256px; left: 737px; top: 280px;"><img class="leaflet-tile leaflet-tile-loaded" src="./2(4).png" style="height: 256px; width: 256px; left: 993px; top: 24px;"><img class="leaflet-tile leaflet-tile-loaded" src="./1(4).png" style="height: 256px; width: 256px; left: 993px; top: -232px;"><img class="leaflet-tile leaflet-tile-loaded" src="./3(4).png" style="height: 256px; width: 256px; left: 993px; top: 280px;"></div></div><div class="leaflet-layer" style="opacity: 0.99;"><div class="leaflet-tile-container leaflet-zoom-animated"></div><div class="leaflet-tile-container leaflet-zoom-animated"><img class="leaflet-tile leaflet-tile-loaded" src="./2(5).png" style="height: 256px; width: 256px; left: 481px; top: 24px;"><img class="leaflet-tile leaflet-tile-loaded" src="./3(5).png" style="height: 256px; width: 256px; left: 481px; top: 280px;"><img class="leaflet-tile leaflet-tile-loaded" src="./2(6).png" style="height: 256px; width: 256px; left: 225px; top: 24px;"><img class="leaflet-tile leaflet-tile-loaded" src="./1(5).png" style="height: 256px; width: 256px; left: 481px; top: -232px;"><img class="leaflet-tile leaflet-tile-loaded" src="./2(7).png" style="height: 256px; width: 256px; left: 737px; top: 24px;"><img class="leaflet-tile leaflet-tile-loaded" src="./3(6).png" style="height: 256px; width: 256px; left: 737px; top: 280px;"><img class="leaflet-tile leaflet-tile-loaded" src="./1(6).png" style="height: 256px; width: 256px; left: 737px; top: -232px;"><img class="leaflet-tile leaflet-tile-loaded" src="./3(7).png" style="height: 256px; width: 256px; left: 225px; top: 280px;"><img class="leaflet-tile leaflet-tile-loaded" src="./1(7).png" style="height: 256px; width: 256px; left: 225px; top: -232px;"><img class="leaflet-tile leaflet-tile-loaded" src="./2(8).png" style="height: 256px; width: 256px; left: 993px; top: 24px;"><img class="leaflet-tile leaflet-tile-loaded" src="./2(9).png" style="height: 256px; width: 256px; left: -31px; top: 24px;"><img class="leaflet-tile leaflet-tile-loaded" src="./1(8).png" style="height: 256px; width: 256px; left: 993px; top: -232px;"><img class="leaflet-tile leaflet-tile-loaded" src="./1(9).png" style="height: 256px; width: 256px; left: -31px; top: -232px;"><img class="leaflet-tile leaflet-tile-loaded" src="./3(8).png" style="height: 256px; width: 256px; left: -31px; top: 280px;"><img class="leaflet-tile leaflet-tile-loaded" src="./3(9).png" style="height: 256px; width: 256px; left: 993px; top: 280px;"></div></div></div><div class="leaflet-objects-pane"><div class="leaflet-shadow-pane"></div><div class="leaflet-overlay-pane"></div><div class="leaflet-marker-pane"></div><div class="leaflet-popup-pane"></div></div></div><div class="leaflet-control-container"><div class="leaflet-top leaflet-left"><div class="leaflet-control-zoom leaflet-bar leaflet-control"><a class="leaflet-control-zoom-in" href="http://bl.ocks.org/oriolbx/raw/688c63b865e7045e9f90/174c82b7833945022cf6c0ba16dbf96d6c409bf3/#" title="Zoom in">+</a><a class="leaflet-control-zoom-out" href="http://bl.ocks.org/oriolbx/raw/688c63b865e7045e9f90/174c82b7833945022cf6c0ba16dbf96d6c409bf3/#" title="Zoom out">-</a></div></div><div class="leaflet-top leaflet-right"></div><div class="leaflet-bottom leaflet-left"></div><div class="leaflet-bottom leaflet-right"><div class="leaflet-control-attribution leaflet-control"><a href="http://leafletjs.com/" title="A JS library for interactive maps">Leaflet</a> | Stamen, CARTO <a href="https://carto.com/attributions" target="_blank">attribution</a></div></div></div><div class="cartodb-legend-stack" style="display: none;"></div><div class="cartodb-infowindow" style="display: none; margin-bottom: -10px; opacity: 0; visibility: hidden;"><div class="cartodb-popup v2"><a href="http://bl.ocks.org/oriolbx/raw/688c63b865e7045e9f90/174c82b7833945022cf6c0ba16dbf96d6c409bf3/#close" class="cartodb-popup-close-button close">x</a><div class="cartodb-popup-content-wrapper"><div class="cartodb-popup-content" style="max-height: 180px;"></div></div><div class="cartodb-popup-tip-container"></div></div></div><div class="cartodb-infowindow" style="display: none; margin-bottom: -10px; opacity: 0; visibility: hidden;"><div class="cartodb-popup v2"><a href="http://bl.ocks.org/oriolbx/raw/688c63b865e7045e9f90/174c82b7833945022cf6c0ba16dbf96d6c409bf3/#close" class="cartodb-popup-close-button close">x</a><div class="cartodb-popup-content-wrapper"><div class="cartodb-popup-content" style="max-height: 180px;"></div></div><div class="cartodb-popup-tip-container"></div></div></div><div class="cartodb-infowindow" style="display: none; margin-bottom: -10px; opacity: 0; visibility: hidden;"><div class="cartodb-popup v2"><a href="http://bl.ocks.org/oriolbx/raw/688c63b865e7045e9f90/174c82b7833945022cf6c0ba16dbf96d6c409bf3/#close" class="cartodb-popup-close-button close">x</a><div class="cartodb-popup-content-wrapper"><div class="cartodb-popup-content" style="max-height: 180px;"></div></div><div class="cartodb-popup-tip-container"></div></div></div><div class="cartodb-logo" style="position:absolute; bottom:0; left:0; display:block; border:none; z-index:1000000;"><a href="http://www.carto.com/" target="_blank"><img width="71" height="29" src="./new_logo.png" style="position:absolute; bottom:8px; left:8px; display:block; width:71px!important; height:29px!important; border:none; outline:none;" alt="CARTO" title="CARTO"></a></div></div>
    <div id="layer0" class="buttons" data="0">Show/hide Europe</div>
    <div id="layer1" class="buttons" data="1" style="top: 102px; background: rgba(0,255,0,0.8);">Show/hide World</div>
    <div id="layer1" class="buttons" data="2" style="top: 160px; background: rgba(255,0,0,0.8);">Show/hide China</div>
    

   

    <!-- include cartodb.js library -->
    <script src="./cartodb.js"></script>
    <script>

      function main() {

        // create leaflet map
        var map = L.map('map', { 
          zoomControl: false,
          scrollWheelZoom: false,
          center: [43, 0],
          zoomControl: true,
          zoom: 2
        })

        // add a base layer
        L.tileLayer('http://tile.stamen.com/toner/{z}/{x}/{y}.png', {
          attribution: 'Stamen'
        }).addTo(map);

        var namedLayerSource = {
          user_name: 'oboix',
          type: 'namedmap',
          named_map: {
             name: "toggle_named_maps_multilayer",
               layers: [{
                 layer_name: "europe"

                 
                },
                {
                  layer_name: "world"
                  
                },
                {
                  layer_name: "world_1"
                  
                }
                ]
              }
        }

        // add cartodb layer with one sublayer
        cartodb.createLayer(map, namedLayerSource)
          .addTo(map)
          .done(function(layer) {
              
              // Enable interactions events for all sublayers
              for (var i = 0; i < layer.getSubLayerCount(); ++i ) {

                  layer.getSubLayer(i).on('featureOver', function(e, pos, pixel, data) {
                      console.log("Event #" + data.cartodb_id + ", name " + data.admin);
                  });
                  // infowindow
                  cdb.vis.Vis.addInfowindow(map,layer.getSubLayer(i),['cartodb_id','name']);
                  // tooltip definition with createLayer
                           var testTooltip = layer.leafletMap.viz.addOverlay({
                              type: 'tooltip',
                              layer: layer.getSubLayer(i),
                              template: '<div class="cartodb-tooltip-content-wrapper"><p>{{cartodb_id}}</p></div>', 
                              width: 200,
                              position: 'bottom|right',
                              fields: [{ name: 'cartodb_id' }]
                            });
                            $('body').append(testTooltip.render().el);
                            
                          

              }
            console.log(layer.getSubLayerCount());
            var toggle = false;

            $(".buttons").on('click', function(e) {
                var layerNum = $(e.target).attr('data');
                toggle = layer.getSubLayer(layerNum).toggle();
                console.log("layer " + layerNum + " toggled: " + toggle);
            });
        })
        .error(function(err) {
            console.log("error: " + err);
        });
      }

      window.onload = main; 

    </script>

  
<div class="cartodb-tooltip" style="top: 28px; left: 803px; display: none;"><div class="cartodb-tooltip-content-wrapper"><p>7</p></div></div><div class="cartodb-tooltip"><div class="cartodb-tooltip-content-wrapper"><p></p></div></div><div class="cartodb-tooltip"><div class="cartodb-tooltip-content-wrapper"><p></p></div></div></body></html>